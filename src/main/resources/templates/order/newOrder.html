<h1 class="fw-bold mb-4">Create New Order</h1>

<div class="card shadow p-4">

    <form th:action="@{/orders/add}" th:object="${order}" method="post">

        <!-- EMPLOYEE MODE: They choose both CLIENT and EMPLOYEE -->
        <div th:if="${employeeMode}" class="mb-3">
            <label class="form-label fw-semibold">Choose Client</label>
            <select th:field="*{clientId}" class="form-select" required>
                <option value="" disabled selected>Select client...</option>
                <option th:each="c : ${clients}"
                        th:value="${c.id}"
                        th:text="${c.name}">
                </option>
            </select>
        </div>

        <!-- CLIENT MODE: Show client name only -->
        <div th:if="${!employeeMode}" class="mb-3">
            <label class="form-label fw-semibold">Client</label>
            <p class="form-control-plaintext" th:text="${clientName}"></p>

            <!-- hidden clientId field -->
            <input type="hidden" th:field="*{clientId}">
        </div>


        <!-- BOTH ROLES MUST CHOOSE EMPLOYEE -->
        <div class="mb-3">
            <label class="form-label fw-semibold">Choose Employee</label>
            <select th:field="*{employeeId}" class="form-select" required>
                <option value="" disabled selected>Select employee...</option>
                <option th:each="emp : ${employees}"
                        th:value="${emp.id}"
                        th:text="${emp.name}">
                </option>
            </select>
        </div>


        <!-- ACTION BUTTONS -->
        <div class="mt-4">
            <button type="submit" class="btn btn-primary me-2">
                <i class="fa fa-check"></i> Create
            </button>

            <button type="reset" class="btn btn-secondary">Reset</button>

            <a th:href="@{/orders}" class="btn btn-outline-secondary ms-2">Cancel</a>
        </div>

    </form>

</div>
