<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <title>Edit Order</title>
</head>

<body>

<header>
    <div th:insert="~{menunavy::navy}"></div>
</header>

<main class="container mt-4">

    <h1 class="fw-bold mb-4">Edit Order</h1>

    <div class="card shadow p-4" th:object="${order}">

        <div class="row mb-3">
            <div class="col">
                <label class="fw-semibold">ID:</label>
                <input type="text" th:field="*{id}" class="form-control" disabled>
            </div>

            <div class="col">
                <label class="fw-semibold">Client:</label>
                <input type="text" th:value="${order.clientName}" class="form-control" disabled>
            </div>
            <div class="col">
                <label class="fw-semibold">Employee:</label>


                <select th:if="${employeeMode}"
                        th:field="*{employeeId}"
                        class="form-select">
                    <option th:each="emp : ${employees}"
                            th:value="${emp.id}"
                            th:text="${emp.name}">
                    </option>
                </select>


                <input th:if="${!employeeMode}"
                       type="text"
                       th:value="${order.employeeName}"
                       class="form-control"
                       disabled>
            </div>
        </div>

        <h4 class="mt-4 fw-semibold">Order Items</h4>

        <table class="table table-hover table-bordered mt-3">
            <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Appliance</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Action</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="row : ${rows}">
                <td><span class="float-end" th:text="${row.id}"></span></td>
                <td th:text="${row.applianceName}"></td>
                <td><span class="float-end" th:text="${row.number}"></span></td>
                <td><span class="float-end" th:text="${row.amount}"></span></td>
                <td>
                    <a th:href="@{'/orders/' + ${order.id} + '/remove-row/' + ${row.id}}"
                       class="btn btn-sm btn-danger"
                       onclick="return confirm('Remove this item from the order?');">
                        Remove
                    </a>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="mt-3">
            <a th:href="@{/orders/{id}/choice-appliance(id=${order.id})}" class="btn btn-primary me-2">
                <i class="fa fa-plus"></i> Add Item
            </a>

            <a th:href="@{/orders}" class="btn btn-secondary">
                <i class="fa fa-arrow-left"></i> Back
            </a>
        </div>

    </div>

</main>

<div th:insert="~{footer::footer}"></div>

</body>

<style>
    /* General page styling */
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f8f9fa;
        color: #212529;
        margin: 20px;
    }

    h1 {
        margin-bottom: 20px;
        font-weight: 600;
        color: #343a40;
    }

    .card {
        border-radius: 10px;
        background-color: #ffffff;
        box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }

    table {
        background-color: #fff;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 3px 8px rgba(0,0,0,0.05);
    }

    .table-hover tbody tr:hover {
        background-color: #e9f5ff !important;
        transition: 0.2s ease-in-out;
    }

    td span.float-end {
        display: inline-block;
        min-width: 60px;
        text-align: right;
    }

    .btn-primary {
        font-weight: 500;
    }

    .btn-secondary {
        font-weight: 500;
    }
</style>

</html>
